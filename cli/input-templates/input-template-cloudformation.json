{
    "StackName": "$PREFIX$-$PROJECT_ID$-$STAGE_ID$-deploy",
    "TemplateURL": "https://$TOOLCHAIN_BUCKETNAME$.s3.amazonaws.com/$TOOLCHAIN_BUCKETKEY$/pipeline-toolchain.yml",
    "Parameters": [
        {
            "ParameterKey": "Prefix",
            "ParameterValue": "$PREFIX$",
            "UsePreviousValue": true
        },
        {
            "ParameterKey": "ProjectId",
            "ParameterValue": "$PROJECT_ID$",
            "UsePreviousValue": true
        },
        {
            "ParameterKey": "StageId",
            "ParameterValue": "$STAGE_ID$",
            "UsePreviousValue": true
        },
        {
            "ParameterKey": "S3BucketNameOrgPrefix",
            "ParameterValue": "$S3_ORG_PREFIX$",
            "UsePreviousValue": true
        },
        {
            "ParameterKey": "DeployEnvironment",
            "ParameterValue": "$DEPLOY_ENVIRONMENT$",
            "UsePreviousValue": true
        },
        {
            "ParameterKey": "ParameterStoreBasePath",
            "ParameterValue": "$PARAM_STORE_PATH$",
            "UsePreviousValue": true
        },
        {
            "ParameterKey": "AlarmNotificationEmail",
            "ParameterValue": "$ALARM_NOTIFICATION_EMAIL$",
            "UsePreviousValue": true
        },
        {
            "ParameterKey": "CodeCommitRepository",
            "ParameterValue": "$REPOSITORY$",
            "UsePreviousValue": true
        },
        {
            "ParameterKey": "CodeCommitBranch",
            "ParameterValue": "$REPOSITORY_BRANCH$",
            "UsePreviousValue": true
        }
    ],
    "Capabilities": [
        "CAPABILITY_NAMED_IAM"
    ],
    "RoleARN": "arn:aws:iam::$AWS_ACCOUNT$:role/$PREFIX$-CloudFormation-Service-Role",
    "OnFailure": "ROLLBACK",
    "Tags": [
        {
            "Key": "Name",
            "Value": "Hello World"
        },
        {
            "Key": "Application",
            "Value": "Hello World"
        },
        {
            "Key": "Department",
            "Value": "Web Services"
        },
        {
            "Key": "Provisioner",
            "Value": "CloudFormation"
        },
        {   
            "Key": "Atlantis",
            "Value": "deploy-pipeline"
        },
        {
            "Key": "atlantis:Prefix",
            "Value": "$PREFIX$"
        },
        {
            "Key": "atlantis:Project",
            "Value": "$PREFIX$-$PROJECT_ID$"
        },
        {
            "Key": "atlantis:ProjectDeploymentID",
            "Value": "$PREFIX$-$PROJECT_ID$-$STAGE_ID$"
        },
        {
            "Key": "CloudFormationStack",
            "Value": "$PREFIX$-$PROJECT_ID$-$STAGE_ID$-deploy"
        },
        {
            "Key": "CloudFormationStackArn",
            "Value": "arn:aws:cloudformation:$AWS_REGION$:$AWS_ACCOUNT$:stack/$PREFIX$-$PROJECT_ID$-$STAGE_ID$-deploy"
        },
        {
            "Key": "CodeCommitRepository",
            "Value": "$REPOSITORY$"
        },
        {
            "Key": "CodeCommitBranch",
            "Value": "$REPOSITORY$:$REPOSITORY_BRANCH$"
        },
        {
            "Key": "CodeCommitRepositoryArn",
            "Value": "arn:aws:codecommit:$AWS_REGION$:$AWS_ACCOUNT$:$REPOSITORY$"
        },
        {
            "Key": "Environment",
            "Value": "$DEPLOY_ENVIRONMENT$"
        },
        {
            "Key": "Stage",
            "Value": "$STAGE_ID$"
        },
        {
            "Key": "AlarmNotificationEmail",
            "Value": "$ALARM_NOTIFICATION_EMAIL$"
        }
    ],
    "EnableTerminationProtection": true
}